# 1 操作系统的概念、特征、功能和提供的服务
## 1.1 操作系统的概念
操作系统是指控制和管理整个计算机系统的硬件和软件资源，合理的组织、调度计算机的工作和资源的分配，进而为用户和其他软件提供方便接口与环境的程序集合。操作系统是计算机系统中最基本的系统软件。
## 1.2 操作系统的特征
1. 并发
2. 共享
	1. 互斥共享方式
	2. 同步共享方式
3. 虚拟
4. 异步
## 1.3 操作系统的功能
1. 操作系统作为系统资源的管理者
	1. 处理机管理
		1. 进程调度
		2. 进程同步
		3. 进程通信
		4. 调度
			1. 作业调度
			2. 进程调度
	2. 存储器管理
		1. 内存的分配与回收
		2. 内存保护
		3. 地址映射
		4. 内存扩充
	3. 文件管理
		1. 文件存储空间管理
		2. 目录管理
		3. 文件的读写管理和保护
	4. 设备管理
		1. 缓冲管理
		2. 设备分配
		3. 设备处理
	5. 接口管理
		1. 用户接口
			1. 联机用户接口
			2. 脱机用户接口
			3. 图形用户接口
		2. 程序接口
2. 操作系统为用户与计算机之间的接口
	1. 命令接口
	2. 程序接口
3. 操作系统实现了对计算机资源的抽象
# 2 操作系统的发展和分类
1. 人工操作方式
2. 脱机I/O方式
3. 单道批处理系统
4. 多道批处理系统
	1. 特点 
		1. 多道。计算机中同时存放多道相互独立的程序
		2. 宏观上并行
		3. 微观上串行
	2. 需要解决以下问题
		1. 如何分配处理器
		2. 多道程序的内存分配问题
		3. I/O设备如何分配
		4. 如何组织和存放大量的程序和数据，以方便用户使用并保证其安全性和一致性
5. 分时系统
6. 实时系统
	1. 硬实时操作系统
	2. 软实时操作系统 
7. 微机操作系统
8. 嵌入式操作系统
9. 网络操作系统
10. 分布式操作系统
# 3 操作系统的运行环境

## 3.1 内核态与用户态
1. 特权指令，是指不允许用户直接使用的指令，如IO、关中断指令、内存清零指令，存取用于内存保护的寄存器、送PSW到程序状态字寄存器等的指令
2. 非特权指令，是指允许用户直接使用的指令，它不能直接访问系统中的软硬件资源，仅限于访问用户的地址空间，这也是为了防止用户程序对系统造成破环
## 3.2 中断与异常
### 3.2.1 中断
中断也称外中断，是指来自CPU执行指令外部的事件，通常用于信息输入/输出，如设备发出的IO结束中断，表示设备输入/输出已经完成。
### 3.2.2 异常
异常也称内中断，是指来自CPU执行指令内部的事件，如程序的非法操作码、地址越界、运算溢出、虚存系统的缺页及专门的陷入指令等引起的事件。异常不能被屏蔽，一旦出现，就应该立即处理
### 3.2.3 内中断和外中断的联系与区别
1. 内部中断
	1. 故障 (Fault)  软件中断
	2. 自陷(Trap)    软件中断
	3. 终止(Abort) 硬件中断
2. 外部中断(硬件)
	1. 可屏蔽中断          INTR
	2. 不可屏蔽中断     NMI
## 3.3 系统调用
系统调用是指用户在程序中调用操作系统所提供的一些子功能，它可被视为特殊的公共子程序。
1. 设备管理    完成设备的请求和释放，以及设备启动等功能
2. 文件管理    完成文件的读、写、创建以及删除功能
3. 进程控制    完成进程的创建、阻塞、撤销以及唤醒等功能
4. 进程通信    完成进程之间的消息传递或信号传递等功能
5. 内存管理    完成内存的分配、回收以及获取作业占用内存区大小和起始地址等功能
# 4.操作系统体系结构
1. 分层法
2. 模块化
3. 宏内核
4. 微内核
	1. 微内核的基本概念
		微内核架构，是指将内核中最基本的功能保留在内核，而将那些不需要在核心态执行的功能移到用户态去执行，从而降低内核的设计复杂性。
		1. 与硬件紧密相关的部分
		2. 一些基本的功能
		3. 客户和服务器之间的通信
	2. 微内核的基本功能
		微内核通常使用机制与策略分离的原理来构建OS结构，将机制部分以及硬件紧密相关的部分放到微内核
		1. 进程(线程)管理
		2. 低级存储器管理
		3. 中断和陷入处理
	3. 微内核的特点
		1. 扩展性和灵活性
		2. 可靠性和安全性
		3. 可移植性
		4. 分布式计算
	4. 定义微内核OS的四个方面
		1. 足够小的内核
		2. 基于客户/服务器模式
		3. 应用**机制与策略分离**的模式
			1. 机制是指实现某一功能的具体执行机构
			2. 策略是在机制的基础上借助某些参数和算法来实现该功能的优化
		4. 采用面向对象技术
1. 外核
	为虚拟机分配资源，并检查这些资源使用的安全性，以确保没有机器会使用他人的资源
# 5. 虚拟机
1. 第一类虚拟机管理程序
2. 第二类虚拟机管理程序
# 6. 操作系统引导
1. 激活CPU
2. 硬件自检
3. 加载带有操作系统的硬盘
4. 加载主引导记录
5. 扫描硬盘分区表
6. 加载分区引导记录
7. 加载启动管理器
8. 加载操作系统
  